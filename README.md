# userdb

REST API сервис, с функционалом:
- регистрации;
- авторизации;
- смены пароля пользователя;
- получения списка пользователей.

P.S. Тестирование проводилось на mysql-cleint-5.7 и mysql-server-5.7

## rebar3

Для сборки проекта используется rebar3. Предполагается, что вы уже умеете им пользоваться :)
Можно скопировать уже скомпилированный файл:
```
wget https://s3.amazonaws.com/rebar3/rebar3 && chmod +x rebar3
```
Добавляем путь к файлу в переменную окружения $PATH:
```
./rebar3 local install
```
```
echo "export PATH=$PATH:~/.cache/rebar3/bin" >> ~/.bashrc
```
Взято из https://habr.com/ru/post/319950/

## Сборка

Для сборки приложения сначала подтягиваем зависимости командой:
```
rebar3 get-deps
```
Затем компилируем:
```
rebar3 compile
```

## Запуск

Перед использованием сервиса нужно поставить mysql клиент, т.к. через него
делается создание пользователя, базы и таблицы mysql.

Перед запуском сервиса нужно выполнить команду:
```
sudo mysql < ./priv/mysql-prepare.sql
```

В результате данной команды для сервиса в mysql будут созданы:
* пользователь userdb;
* база userdb;
* таблица user.

P.S. Предполагается, что вы находитесь в папке сервиса.

По умолчанию сервис подключается к mysql серверу расположенному на localhost,
настройки находятся в файле конфигурации по пути:
```
./config/sys.config
```

## Тестирование

Перед запуском тестов нужно выполить команду:
```
sudo mysql < ./test/priv/mysql-prepare.sql
```

P.S. Предполагается, что вы находитесь в папке сервиса.

В результате данной команды для тестов в mysql будут созданы:
* пользователь userdb_test;
* база userdb_test.

По умолчанию во время тестов сервис будет подключается к mysql серверу расположенному
на localhost, настройки находятся в файле конфигурации по пути:
./test/config/sys.config

Запускаем тесты команой:
```
rebar3 ct
```